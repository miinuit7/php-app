# PHP App ① レビュー

## 全般

### 以下のaタグのリンクを押下した際にedit.phpの$_GETにどんな値が格納されるか説明してください。

```html
<a href="edit.php?todo_id=123&todo_content=焼肉">更新</a>
```
$_POST = "焼肉";

### 以下のフォームの送信ボタンを押下した際にstore.phpの$_POSTにどんな値が格納されるか説明してください。

```html
<form action="store.php" method="post">
    <input type="text" name="id" value="123">
		<textarea　name="content">焼肉</textarea>
    <button type="submit">送信</button>
</form>
```

value="123"　と 焼肉

"id" => 123;
"content" => "焼肉";



### `require_once()` は何のために記述しているか説明してください。

該当ファイルに他のファイルを読み込ませるため。（require_onceを記述することにより、他ファイルの関数等も参照可能になる）

### `savePostedData($post)`は何をしているか説明してください。

新規作成ページからリクエストされた場合と編集ページからリクエストされた場合、index.phpからリクエストされた場合それぞれ別の関数が実行するようにしている条件分岐。


### `header('location: ./index.php')`は何をしているか説明してください。

指定先のページにリダイレクトをしている。
カリキュラム上では、createData()関数が実行されたあとに、index.phpに遷移するようになっている。



### `getRefererPath()`は何をしているか説明してください。

ユーザーがどこから（URL）リクエストしてきたのかを文字列で取得してパスを返している。

### `connectPdo()` の返り値は何か、またこの記述は何をするための記述か説明してください。

PDOインスタンスが戻り値。
DBに接続する際に、例外が起きた時にメッセージを表示し処理を終了させるため。
終了させることにより、無限に処理が失敗することを回避することができる。



### `try catch`とは何か説明してください。

try catchは例外処理です。
エラーが起きそうな処理をtryに記載し、catchにtryの処理が正常に行われなかった時の処理を記載します。
これを使うことにより、エラーが出たら本来終了してしまう処理を継続させることができます。



### Pdoクラスをインスタンス化する際に`try catch`が必要な理由を説明してください。

try catchを使わないと、例外が起きた際にエラー文にDB情報が表示されてしまうため。



## 新規作成

### `createTodoData($post)`は何をしているか説明してください。

引数で受け取ったcontentの値をtodosテーブルに挿入している。



## 一覧

### `getTodoList()`の返り値について説明してください。

todosテーブルの中に格納されているレコード



### `<?= ?>`は何の省略形か説明してください。

<?php echo "***"; ?>の略



## 更新

### `getSelectedTodo($_GET['id'])`の返り値は何か、またなぜ`$_GET['id']` を引数に渡すのか説明してください。

・該当IDデータのcontent内容（getTodoTextByIdの返り値）
・クエリパラメータとして指定されたIDを使用して、該当レコードを特定するため。

### `updateTodoData($post)`は何をしているか説明してください。

SQLのUPDATE文を使い、DB上の該当IDデータのcontent内容を編集している。

## 削除

### `deleteTodoData($id)`は何をしているか説明してください。

$nowで取得した現在時刻をdeleted_atに編集して挿入している。

### `deleted_at`を現在時刻で更新すると一覧画面からToDoが非表示になる理由を説明してください。

getAllRecordsで、deleted_atがNULLのもののみを取得しているため。

### 今回のように実際のデータを削除せずに非表示にすることで削除されたように扱うことを〇〇削除というか。

論理削除

### 実際にデータを削除することを〇〇削除というか。

物理削除

### 前問のそれぞれの削除のメリット・デメリットについて説明してください。

【論理削除】
メリット
・削除された内容、日付等がいつでも確認できる。
・後から削除を取り消すことも可能。

デメリット
・データ量が増え、容量の圧迫や予期せぬエラーに繋がる可能性がある。
（削除してもデータとしては残っているため、DB上での検索に引っかかってしまう場合も）


【物理削除】
メリット
・データそのものを削除しているため、容量に余裕ができパフォーマンスが上がる。

デメリット
・誤って削除操作を行なってしまった場合、復元が難しい。
